<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/src/components/svg/logo.svg">
    <title>Music Mix Studio</title>
    <link rel="stylesheet" href="../styles/mix.css">
</head>
<body>
    <div id="mainView">
        <div class="sidebar">
            <div class="user-avatar"><div class="user-avatar-inner"></div></div>
            <div class="workspaces" id="workspaceList"></div>
            <button class="add-workspace-btn" onclick="addWorkspace()">+</button>
        </div>
        <div class="main-content">
            <div class="header">
                <h1>MIX</h1>
                <span class="tape-text" onclick="window.location.href='tape.html'">TAPE</span>
            </div>
            <div class="track-area"><div class="track-grid" id="trackGrid"></div></div>
            <div class="bottom-controls">
                <div style="position: relative;">
                    <button class="control-btn" onclick="toggleColorPicker()">üé®</button>
                    <div id="colorPicker" class="popup color-picker hidden"></div>
                </div>
                <button class="control-btn" onclick="toggleMixer()">‚åÉ</button>
                <button class="control-btn" onclick="switchView('minimal')">‚ô™</button>
            </div>
        </div>
    </div>
    <div id="minimalView" class="hidden">
        <div class="minimal-display"><div class="album-art"></div></div>
        <div class="minimal-controls">
            <div class="playback-controls">
                <div class="album-thumb"></div>
                <div class="track-info">
                    <div class="track-title">Lorem Ipsum</div>
                    <div class="track-artist">dolor sit amet</div>
                </div>
                <button class="play-btn" id="playBtn" onclick="togglePlay()">‚ñ∂</button>
                <div class="progress-bar"><div class="progress-fill"></div></div>
                <div class="time-display">00:00 / 00:00</div>
                <div style="position: relative;">
                    <button class="minimal-icon-btn" onclick="toggleEffects()">‚ö°</button>
                    <div id="effectsPopup" class="popup effects-popup hidden"></div>
                </div>
                <div style="position: relative;">
                    <button class="minimal-icon-btn" onclick="toggleSounds()">üì°</button>
                    <div id="soundsPopup" class="popup sounds-popup hidden"></div>
                </div>
                <div style="position: relative;">
                    <button class="minimal-icon-btn" onclick="toggleVolume()">üîä</button>
                    <div id="volumePopup" class="popup volume-popup hidden">
                        <div class="popup-title">Vol</div>
                        <input type="range" class="volume-slider" min="0" max="100" value="70">
                    </div>
                </div>
                <button class="minimal-icon-btn" onclick="switchView('main')">‚äü</button>
            </div>
        </div>
    </div>
    <div id="mixerOverlay" class="mixer-overlay hidden" onclick="closeMixerOnOverlay(event)">
        <div class="mixer-panel" onclick="event.stopPropagation()">
            <div class="mixer-header">
                <div class="mixer-header-left">
                    <div class="mixer-title">Mixer</div>
                    <div style="position: relative;">
                        <button class="mixer-btn" onclick="toggleScalePicker()">Scale: <span id="currentScaleDisplay">C#</span></button>
                        <div id="scalePicker" class="scale-picker hidden"></div>
                    </div>
                    <button class="mixer-btn">Equalizer</button>
                </div>
                <button class="mixer-close" onclick="toggleMixer()">√ó</button>
            </div>
            <div class="mixer-content"><div class="mixer-channels" id="mixerChannels"></div></div>
        </div>
    </div>
    
    <div id="musicSearchOverlay" class="music-search-overlay hidden" onclick="closeMusicSearchOnOverlay(event)">
        <div class="music-search-panel" onclick="event.stopPropagation()">
            <div class="music-search-header">
                <div class="music-search-title">Select Music for Track</div>
                <button class="music-search-close" onclick="toggleMusicSearch()">√ó</button>
            </div>
            <div class="music-search-content">
                <div class="selected-track-info" id="selectedTrackInfo">
                    <div class="info-message">Select a track square first</div>
                </div>
                <div class="search-bar">
                    <input type="text" id="musicSearchInput" placeholder="Search for tracks..." oninput="searchTracks()">
                    <button class="search-btn">üîç</button>
                </div>
                <div class="tracks-list" id="tracksList">
                    <div class="loading-message">Loading tracks...</div>
                </div>
                <div class="music-search-footer">
                    <button class="assign-track-btn" onclick="assignSelectedTrack()" disabled>Assign Music</button>
                    <button class="cancel-btn" onclick="toggleMusicSearch()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="../scripts/dataService.js"></script>
    <script src="../scripts/audioBarManager.js"></script>
    <script src="../scripts/mix.js"></script>
</body>
</html>
